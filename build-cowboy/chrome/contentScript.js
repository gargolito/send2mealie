(()=>{"use strict";const e=["allrecipes.com","eatingwell.com","foodnetwork.com","food.com","simplyrecipes.com","seriouseats.com","budgetbytes.com","tasty.co","tastykitchen.com","skinnytaste.com","bbcgoodfood.com","thepioneerwoman.com","cooking.nytimes.com","sallysbakingaddiction.com","thespruceeats.com"],t="undefined"!=typeof browser?browser:chrome;!function(){const o="add-to-mealie-button";if(document.getElementById(o))return;const n=document.createElement("button");async function s(){try{const e=await t.storage.sync.get(["mealieUrl","mealieApiToken"])||{};if(!e.mealieUrl||!e.mealieApiToken)return;t.runtime.sendMessage({type:"checkDuplicate",url:location.href},e=>{e?.exists&&(n.textContent="Mealied!",n.style.background="#E58325",n.disabled=!0,n.style.opacity="0.7",n.style.cursor="default",n.style.pointerEvents="none")})}catch(e){console.error("Send2Mealie: Error checking recipe existence")}}async function i(){const o=new URL(location.href).hostname.replace(/^www\./,"");try{const i=await t.storage.sync.get(["domainWhitelist","userSites","mealieUrl","mealieApiToken"])||{},a=i.domainWhitelist||e,r=i.userSites||[];if([...a,...r].some(e=>o.endsWith(e))){if(!i.mealieUrl||!i.mealieApiToken)return;t.runtime.sendMessage({type:"isRecipePage",url:location.href},e=>{e?.isRecipe&&(document.body?(document.body.appendChild(n),s()):document.addEventListener("DOMContentLoaded",()=>{document.body.appendChild(n),s()}))})}}catch(e){console.error("Send2Mealie: Error checking whitelist",e)}}n.id=o,n.textContent="Send to Mealie",n.style.position="fixed",n.style.bottom="20px",n.style.right="20px",n.style.zIndex="2147483647",n.style.background="#E58325",n.style.color="white",n.style.border="none",n.style.borderRadius="6px",n.style.padding="10px 14px",n.style.boxShadow="0 2px 6px rgba(0,0,0,0.2)",n.style.cursor="pointer",n.style.font='14px/1.2 -apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif',n.addEventListener("click",async()=>{const e=await t.storage.sync.get(["mealieUrl","mealieApiToken"])||{},{mealieUrl:o,mealieApiToken:s}=e;o&&s?(n.textContent="Sending...",n.style.background="#9ACD32",n.style.opacity="0.7",n.style.pointerEvents="none",t.runtime.sendMessage({type:"createViaApi",url:location.href},e=>{n.style.opacity="1",n.style.pointerEvents="auto",e?.success?(n.style.background="#E58325",n.textContent="Mealied!",n.disabled=!0,n.style.cursor="default",n.style.pointerEvents="none"):e?.duplicate?(n.style.background="#2098eeff",n.textContent="Already saved âœ“",setTimeout(()=>n.textContent="Send to Mealie",3e3)):(n.textContent="Error",setTimeout(()=>n.textContent="Send to Mealie",2e3))})):t.runtime.sendMessage({type:"openPopup"})}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i()}()})();
//# sourceMappingURL=contentScript.js.map